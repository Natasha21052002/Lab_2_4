## Работа с временным рядом
Данные: цены на момент закрытия на акции компании META
#### Загрузка данных

<img width="421" alt="image" src="https://user-images.githubusercontent.com/98012309/234591804-b2fc292a-e3d1-4b50-bd84-be6079adfc88.png">

### Построим график временного ряда

<img width="590" alt="image" src="https://user-images.githubusercontent.com/98012309/234592020-e9b20ef5-8b4d-4d2c-b5fd-9922f969b048.png">

По графику нельзя точно сказать стоило или нет вкладыватся в акции компании. Также мы видим,что ряд не стационарен. В нём можно выразить трендовую зависимость.

График показывает, что цены на акции META в основном исправно с периодичными колебаниями росли до 2022 года. Однако, можно заметить, что дальше происходит резкий обвал акций, но при этом замятны признаки улучшения и исправления критичной ситуации.

### Тест Дикки-Фуллера
Проверим на уровне значимости 0.05

<img width="599" alt="image" src="https://user-images.githubusercontent.com/98012309/234592470-9c7fe1d1-8e16-4afb-82d7-5b4bdd4b40f9.png">

<img width="324" alt="image" src="https://user-images.githubusercontent.com/98012309/234592886-6dcbc9d6-8d03-43ef-ae34-6164b3f8d6f1.png">

Results of Dickey-Fuller Test:

p-value = 0.4186. The series is likely non-stationary.

Test Statistic                  -1.724301

p-value                          0.418637

#Lags Used                      15.000000

Number of Observations Used    536.000000

Critical Value (1%)             -3.442609

Critical Value (5%)             -2.866947

Critical Value (10%)            -2.569650

dtype: float64

На основании теста Dickey-Fuller, можно сделать вывод о том, что временной ряд не является стационарным. Это подтверждается большим значением p-value, превышающим уровень значимости 0.05, и недостаточным значением тестовой статистики для отклонения от нулевой гипотезы о нестационарности ряда.

### Методология Бокса-Дженкинса.

ACF

<img width="348" alt="image" src="https://user-images.githubusercontent.com/98012309/234593922-1790b9f5-b827-49fa-a897-03e9b10fdeb3.png">

<img width="332" alt="image" src="https://user-images.githubusercontent.com/98012309/234594060-89fba2ce-6c50-49f0-a015-89c74ffe47b3.png">

PACF

<img width="343" alt="image" src="https://user-images.githubusercontent.com/98012309/234596611-6d694c3d-9104-474f-b3d8-bcd3738db1e7.png">

<img width="336" alt="image" src="https://user-images.githubusercontent.com/98012309/234596713-ae01427e-7f3f-439f-af4a-76f2ad466cf0.png">

Результаты построение PACF и ACF не удовлетворительны. Сложно определить примерные значения p,q для построения ARIMA-модели. Предлагается для начала избавится от трендовой зависимости

#### Удаления линейной трендовой составляющей из временного ряда

![image](https://user-images.githubusercontent.com/98012309/234594794-e1320a80-62b5-418a-b0cb-b52678e1df83.png)


### Тест Дикки-Фуллера без тренда

p-value = 0.4219. Ряд вероятно нестационарен. 
Поcле преобразований ряд всё ещё не стационарен.

### Разделяем на обучающую и тестовую выборки

Размер обучающей выборки: 450

Размер тестовой выборки: 102

![image](https://user-images.githubusercontent.com/98012309/234595612-5c0786aa-cb85-410b-8c44-75a9c7e1b1c7.png)

Таким образом на исзодных данных можно построить модель ARIMA(5,2,6). Она сложнее нежели модель без тренда, однако, даёт лучшие результаты

#### Проверим модель на тестовой выборке

![image](https://user-images.githubusercontent.com/98012309/234595903-4a657a19-839f-47b2-bcaa-a4ef711bb2f6.png)

### Построим прогноз

![image](https://user-images.githubusercontent.com/98012309/234596023-42cee306-31b2-4079-a0fd-111a5828e655.png)

Исходя из анализа графика, можно сделать вывод, что в будущем цены на акции компании META скорее всего будут повышаться.

#### Построение моделей для прогноза по разным периодам

![image](https://user-images.githubusercontent.com/98012309/234596189-f3251b7e-77e4-4d2d-b611-915aa0a20aec.png)

#### Требуется разделить исходные данные на 3 блока:

1) Начало - середина 2018

2) середина 2018 - середина 2020

3) 2020 - конец

Из результатов моделирования видно, что лучшая модель на первом блоке данных имеет порядок (2,2,1) и достигает AIC на тренировочной выборке в размере 1379.7422, а на тестовой - 219.9236. Лучшая модель на втором блоке данных имеет порядок (2,1,2) и достигает AIC на тренировочной выборке в размере 601.4384, а на тестовой - 109.691. Лучшая модель на третьем блоке данных имеет порядок (0,2,1) и достигает AIC на тренировочной выборке в размере 1005.9922, а на тестовой - 126.1237.

Модель с наименьшим значением AIC на тестовой выборке является наиболее предпочтительной для прогнозирования будущих значений. Следовательно, на основе результатов моделирования можно сделать вывод, что наиболее точная модель на тестовой выборке была построена на втором блоке данных и имеет порядок (2,1,2).
